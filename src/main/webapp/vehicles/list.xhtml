<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../WEB-INF/templates/master.xhtml"
		xmlns:p="http://primefaces.org/ui"
		xmlns:h="http://java.sun.com/jsf/html">

    <ui:define name="content-heading">
        Vehicles
    </ui:define>

    <ui:define name="content">
	<h:form>
	    <h:panelGroup style="float: right">
		<h:commandLink action="#{vehicleController.createNewVehicle}" value="New"/>
	    </h:panelGroup>
	</h:form>
	<p:spacer height="15" width="20"/>
	<h:form id="vehicle-list-form">
            <p:dataTable value="#{vehicleController.vehicles}" var="vehicle" lazy="true" rows="20" paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom">
		<p:column headerText="Registration">
		    <h:commandLink action="#{vehicleController.viewSelectedVehicle()}">
			<h:outputText value="#{vehicle.registrationNumber}"/>
		    </h:commandLink>
		</p:column>
		<p:column headerText="Customer">
		    <h:commandLink action="#{vehicleController.viewSelectedvehicleCustomer}">
			<h:outputText value="#{vehicle.customer}"/>
		    </h:commandLink>
		</p:column>
		<p:column headerText="Model">
		    <h:outputText value="#{vehicle.model}"/>
		</p:column>
		<p:column headerText="GPS Device">
                    <h:outputText value="#{vehicle.gpsDevice.idn} (#{vehicle.gpsDevice.phoneNumber})"/>
		</p:column>
	    </p:dataTable>
	</h:form>
    </ui:define>

</ui:composition>
